<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ê³ ì–‘ì´ ê°€ë¼ì‚¬ëŒ€</title>
  </head>
  <style>
    body {
      text-align: center;
    }
    .main-card button {
      position: relative;
      left: -45px;
      bottom: 15px;
    }
    .favorites {
      list-style: none;
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      gap: 15px;
    }
    /* .favorites img {
      width: 150px; ë¦¬ì•¡íŠ¸ì—ì„œ ìŠ¤íƒ€ì¼ë§ í•˜ëŠ” ë°©ë²•ìœ¼ë¡œ ë‹¤ì‹œ í‘œí˜„í•¨ html 80 
    } */
  </style>
  <body>
    <!-- ì´ë¯¸ì§€ lië¥¼ ë‹´ì„ ê³µê°„ -->
    <div id="app"></div>

    <script
      src="https://unpkg.com/react@17/umd/react.development.js"
      crossorigin
    ></script>
    <script
      src="https://unpkg.com/react-dom@17/umd/react-dom.development.js"
      crossorigin
    ></script>
    <script src="https://unpkg.com/babel-standalone@6/babel.min.js"></script>
    <!-- ë°”ë²¨ì¶”ê°€ -->
    <!-- jsì—  html íƒœê·¸ ì‘ì„±ì‹œ ë‚˜ì˜¤ëŠ” <> ë¥¼ ì½ì„ ìˆ˜ ì—†ë‹¤ëŠ”  ì˜¤ë¥˜ë¥¼ ì—†ì•° -->
    <script type="text/babel">
      const jsonLocalStorage = {
        setItem: (key, value) => {
          localStorage.setItem(key, JSON.stringify(value));
        },
        getItem: (key) => {
          return JSON.parse(localStorage.getItem(key));
        },
      };

      // const title = <h1>1ë²ˆì§¸ ê³ ì–‘ì´ ê°€ë¼ì‚¬ëŒ€</h1>;
      // title ì—˜ë¦¬ë¨¼íŠ¸ >ì»´í¬ë„ŒíŠ¸í™”
      const Title = (props) => {
        return <h1>{props.children}</h1>;
      };

      // const form = (
      //   <form>
      //     <input
      //       type="text"
      //       name="name"
      //       placeholder="ì˜ì–´ ëŒ€ì‚¬ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”"
      //     />
      //     <button type="submit">ìƒì„±</button>
      //   </form>
      // );
      // form ì—˜ë¦¬ë¨¼íŠ¸ >ì»´í¬ë„ŒíŠ¸í™”
      const Form = ({ updateMainCat }) => {
        const includesHangul = (text) => /[ã„±-ã…|ã…-ã…£|ê°€-í£]/i.test(text);
        const [value, setValue] = React.useState("");
        const [errorMessage, setErrorMessage] = React.useState("");

        function handleInputChange(e) {
          const userValue = e.target.value;
          setErrorMessage("");
          if (includesHangul(userValue)) {
            setErrorMessage("í•œê¸€ì€ ì…ë ¥í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
          }
          setValue(userValue.toUpperCase());
        }
        function handleFormSubmit(e) {
          e.preventDefault();
          setErrorMessage("");
          if (value === "") {
            setErrorMessage("ë¹ˆ ê°’ì€ ì…ë ¥í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
            return;
          }
          updateMainCat();
        }
        // counterStateë¥¼ 2ê°œì˜ êµ¬ì¡°ë¡œ ë‚˜ëˆŒêº¼ì„
        // const counter = counterState[0];
        // const setCounter = counterState[1];
        // counter ëŠ” counterState ì˜ 0ë²ˆì§¸ ì¸ë±ìŠ¤ë¡œ ë°›ê³ 
        // setcounter ëŠ” counterState ì˜ 1ë²ˆì§¸ ì¸ë±ìŠ¤ë¥¼ ë°›ëŠ”ë‹¤
        // ì´ë ‡ê²Œ 2ê°œë¥¼ ì“¸ìˆ˜ë„ ìˆì§€ë§Œ ì¢€ ë” ê¹”ë”í•œ ì½”ë“œëŠ” í•©ì³ì„œ {0 , 1} ë¡œ ì‘ì„± ê°€ëŠ¥

        // Form ì—ì„œ handleFormSubmitì´ ì—†ìœ¼ë‹ˆê¹Œ props ë¡œ ë°›ì•„ì˜¤ëŠ”ê±°ì„
        return (
          <form onSubmit={handleFormSubmit}>
            <input
              type="text"
              name="name"
              placeholder="ì˜ì–´ ëŒ€ì‚¬ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”"
              value={value}
              onChange={handleInputChange}
            />
            <button type="submit">ìƒì„±</button>
            <p style={{ color: "red" }}>{errorMessage}</p>
          </form>
        );
      };

      function CatItem(props) {
        return (
          <li>
            <img src={props.img} style={{ width: "150px" }}></img>
          </li>
        );
        // cat1, cat2 ì˜ ê°ê°ì˜ ì‚¬ì§„ì„ ë°›ì•„ë³´ì—¬ì¤Œ , ì¸ìë¥¼ í†µí•´ì„œ
        // CatItem ì„ í†µí•´ ì´ë¯¸ì§€ë¥¼ ë‹¤ë¥´ê²Œ ë„˜ê¸°ëŠ” ê²ƒ ë§Œìœ¼ë¡œë„ ì¼ê´€ì ì´ê²Œ ì½”ë“œë¥¼ ì¬ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ ëœë‹¤.
      }

      // const favorites = (
      //   <ul class="favorites">
      //     <CatItem img="https://cataas.com//cat/5e9970351b7a400011744233/says/inflearn" />
      //     <CatItem img="https://cataas.com/cat/595f280b557291a9750ebf65/says/JavaScript" />{" "}
      //   </ul>
      //   ì¼ë‹¨ ì´ë¯¸ì§€ë¥¼ ë„˜ê²¨ë°›ì•˜ìŒ , CatItem ì—ì„œ ì¸ìë¡œ ë°›ì•„ì„œ ë³´ì—¬ì¤˜ì•¼í•¨
      //   ë¦¬ì•¡íŠ¸ì—ì„œ ì¸ìë¥¼ ë°›ëŠ”ê²ƒì„ props ë¼ê³ í•¨
      // );

      function Favorites({ favorites }) {
        return (
          <ul className="favorites">
            {favorites.map((cat) => (
              <CatItem img={cat} key={cat} />
            ))}
          </ul>
          // ì—¬ê¸°ì„œ key = {cat} í‚¤ ê°’ì„ ë„£ì–´ì£¼ëŠ”ê±´ í‚¤ ê°’ì´ ìˆì–´ì•¼ ë¦¬ì•¡íŠ¸ì—ì„œ ìµœì í™”ë¥¼ ì˜í•´ì„œ ë³´ì—¬ì£¼ê¸°ë•Œë¬¸ì´ë‹¤
        );
        // ìœ„ì˜ favorites ë¥¼ ì—˜ë¦¬ë¨¼íŠ¸ >ì»´í¬ë„ŒíŠ¸í™”
      }

      // ìë°”ìŠ¤í¬ë¦½íŠ¸ ë³€ìˆ˜ë¥¼ ë¦¬ì•¡íŠ¸ ë¬¸ë²•ì•ˆì—ì„œ ì“°ëŠ” ë²•ì€ {ì¤‘ê´„í˜¸ì„}
      // const mainCard = (
      //   <div class="main-card">
      //     <img
      //       src="https://cataas.com/cat/60b73094e04e18001194a309/says/react"
      //       alt="ê³ ì–‘ì´"
      //       width="400"
      //     />
      //     <button>ğŸ¤</button>
      //   </div>
      // );
      // MainCard ì—˜ë¦¬ë¨¼íŠ¸ >ì»´í¬ë„ŒíŠ¸í™”
      const MainCard = ({ img, onHeartClick }) => {
        return (
          <div className="main-card">
            <img src={img} alt="ê³ ì–‘ì´" width="400" />
            <button onClick={onHeartClick}>ğŸ¤</button>
          </div>
        );
      };
      // ë¦¬ì•¡íŠ¸ì— jsx ì—ì„œëŠ” onClick ìœ¼ë¡œ ëŒ€ë¬¸ìë¥¼ ì¨ì¤˜ì•¼í•¨
      // ì—¬ê¸°ì„œ Props ë¥¼ ì•ˆì“°ê³  ì˜¤ë¸Œì íŠ¸ë¡œ ë°”ë¡œ ì“¸ ìˆ˜ë„ ìˆìŒ
      // const MainCard = ({ img }) => (
      // ì˜¤ë¸Œì íŠ¸ë¡œ í’€ì–´ë²„ë¦´ ìˆ˜ë„ ìˆìŒ
      // <img src = {img} />

      // app ì˜ ì»´í¬ë„ŒíŠ¸í™”
      const App = () => {
        const CAT1 =
          "https://cataas.com/cat/60b73094e04e18001194a309/says/react";
        const CAT2 =
          "https://cataas.com//cat/5e9970351b7a400011744233/says/inflearn";
        const CAT3 =
          "https://cataas.com/cat/595f280b557291a9750ebf65/says/JavaScript";

        const [counter, setCounter] = React.useState(
          jsonLocalStorage.getItem("counter")
          // ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ëŠ” ìŠ¤íŠ¸ë§ìœ¼ë¡œ ì „ë‹¬í•˜ê¸°ë•Œë¬¸ì— +1 ì„ í•˜ê²Œë˜ë©´ 1ì„ ë¶™ì—¬ì„œ ë‚˜ì˜¤ë‹ˆê¹Œ Number ë¥¼ ìˆ«ì 1ì´ ì˜¤ë¥´ê²Œ í•´ì¤Œ
        ); // 1ì€ stateì˜ ì´ˆê¸°ê°’ì„
        const [mainCat, setMainCat] = React.useState(CAT1);
        const [favorites, setFavorites] = React.useState(
          jsonLocalStorage.getItem("favorites") || []
          // favorites localStorage ê°€ null ê°’ì¼ë•Œ []ë¹ˆë°°ì—´ë¡œ ì´ˆê¸°í™”ë¥¼ í•´ì¤˜ë¼
        );
        // favorites ìŠ¤í…Œì´íŠ¸ë¥¼ ì¶”ê°€ , ì´ˆê¸°ê°’ì€ CAT1 CAT2 ì„

        function updateMainCat() {
          // formSubmit ì— ì²«ë²ˆì§¸ ì¸ìë¡œ event ê°€ ë“¤ì–´ì˜¤ê³ 
          // form ì˜ ê¸°ë³¸ê°’ì„ event.preventDefault();ìœ¼ë¡œ ë§‰ëŠ”ë‹¤
          setMainCat(CAT2);
          const nextCounter = counter + 1;
          setCounter(nextCounter);
          jsonLocalStorage.setItem("counter", nextCounter);
        }
        function handleHeartClick() {
          const nextFavorites = [...favorites, mainCat];
          setFavorites(nextFavorites);
          jsonLocalStorage.setItem("favorites", nextFavorites);
          // ìœ„ ë¬¸ë²•ì€ ê¸°ì¡´ì— ìˆëŠ” favorites ë°°ì—´ ì´ˆê¸°ê°’ì´ CAT1,CAT2ì„ í¼ì³ì„œ ì“°ê³  CAT3ë¥¼ ê·¸ ë’¤ì— ì¶”ê°€í•œë‹¤.
          // ê·¸ëŸ¼ ìœ„ ë°°ì—´ì•ˆì— CAT1 CAT2 CAT3ê°€ ì €ì¥ì´ ë˜ëŠ”ê±°ì„
        }
        return (
          <div>
            <Title>{counter}ë²ˆì§¸ ê³ ì–‘ì´ ê°€ë¼ì‚¬ëŒ€</Title>
            <Form updateMainCat={updateMainCat} />
            <MainCard img={mainCat} onHeartClick={handleHeartClick} />
            <Favorites favorites={favorites} />
          </div>
          // MainCard ì—ì„œ í•˜íŠ¸ë¥¼ ëˆŒë €ì„ ë•Œ handleHeartClick ì„ ë¶ˆëŸ¬ì£¼ëŠ”ë° ì–˜ê°€ ì›ë˜
          // MainCard ë‚´ë¶€ì— ìˆì—ˆëŠ”ë° ìƒìœ„ì—ì„œë„ handleHeartClick ì„ ê³µìœ í•˜ê¸° ìœ„í—¤ì„œ í•¨ìˆ˜ë¥¼ í•œ ë‹¨ê³„ ì˜¬ë ¤ì¤Œ
          // ê·¸ë˜ì„œ í•˜íŠ¸í´ë¦­ì„ í•˜ë©´ favorites ë°°ì—´ì— ê¸°ì¡´ ì´ˆê¸°ê°’ì´ CAT3 ë¥¼ ë”í•´ì„œ favoritesì— ì €ì¥í•œê±°ì„
        );
      };
      const ì—¬ê¸°ë‹¤ê°€ê·¸ë ¤ = document.querySelector("#app");
      ReactDOM.render(<App />, ì—¬ê¸°ë‹¤ê°€ê·¸ë ¤);
      // const app = (
      //   ë‚´ìš©ìœ¼ë¡œ ë„˜ê¸´ê±¸ propsë¡œ ì ‘ê·¼í•˜ëŠ” ë°©ë²• <Title>1ë²ˆì§¸ ê³ ì–‘ì´ ê°€ë¼ì‚¬ëŒ€</Title> ì´ê²Œ ë‚´ìš©ìœ¼ë¡œ ë„˜ê¸°ëŠ”ê±°ì„
      //   íƒœê·¸ ì•ˆì—ë‹¤ ì ëŠ” ë‚´ìš©ì€ children ì´ë¼ëŠ” ì´ë¦„ìœ¼ë¡œ ë„˜ì–´ì˜¨ë‹¤
      //   ê·¸ëŸ¬ë‹ˆ ì ‘ê·¼ í• ë• props.children ìœ¼ë¡œ ì ‘ê·¼í•˜ë©´ ëœë‹¤.
      //   <div>
      //     <Title>1ë²ˆì§¸ ê³ ì–‘ì´ ê°€ë¼ì‚¬ëŒ€</Title>
      //     <Form />
      //     <MainCard img="https://cataas.com/cat/60b73094e04e18001194a309/says/react" />
      //     <Favorites />
      //   </div>
      //   <Favorites /> ì»´í¬ë„ŒíŠ¸ íƒœê·¸ ë°©ì‹
      // );
      // app ë¥¼ ì¸ìë¡œ ë°›ê²Œë˜ëŠ” ê²½ìš° ìµœìƒìœ„ íƒœê·¸ê°€ í•˜ë‚˜ì—¬ì•¼í•˜ëŠ”ë°
      // ë¬¶ì–´ì£¼ì§€ ì•Šìœ¼ë©´ 2ê°œê°€ ë˜ê¸°ë•Œë¬¸ì— í•˜ë‚˜ë¡œ ë¬¶ì–´ì¤˜ì•¼í•œë‹¤.
    </script>
  </body>
</html>
